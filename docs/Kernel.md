### Main

[C2][Main](index.md)üòÉ.

### Version 

- Ubuntu

|       version        |       name        |  timeline  |
| -------------------- | ----------------- | ---------- |
| 22.04                | Jammy Jellyfish   | 2022/4/22  |
| 21.1                 | Impish Indri      | 2021/10/14 |
| 21.04                | Hirsute Hippo     | 2021/04/22 |
| 20.1                 | Groovy Gorilla    | 2020/10/22 |
| 20.04 LTS            | Focal Fossa       | 2020/4/23  |
| 19.1                 | Eoan Ermine       | 2019/10/17 |
| 19.04                | Disco Dingo       | 2019/4/19  |
| 18.1                 | Cosmic Cuttlefish | 2018/10/18 |
| 18.04 LTS            | Bionic Beaver     | 2018/4/26  |
| 17.10(GNOME Desktop) | Artful Aardvark   | 2017/10/21 |
| 17.04                | Zesty Zapus       | 2017/4/13  |
| 16.1                 | Yakkety Yak       | 2016/10/20 |
| 16.04 LTS            | Xenial Xerus      | 2016/4/21  |
| 15.1                 | Wily Werewolf     | 2015/10/23 |
| 15.04                | Vivid Vervet      | 2015/4/22  |
| 14.1                 | Utopic Unicorn    | 2014/10/23 |
| 14.04 LTS            | Trusty Tahr       | 2014/4/18  |
| 13.1                 | Saucy Salamander  | 2013/10/17 |
| 13.04                | Raring Ringtail   | 2013/4/25  |
| 12.1                 | Quantal Quetzal   | 2012/10/18 |
| 12.04 LTS            | Precise Pangolin  | 2012/4/26  |
| 11.1                 | Oneiric Ocelot    | 2011/10/13 |
| 11.04(Unity Desktop) | Natty Narwhal     | 2011/4/28  |
| 10.1                 | Maverick Meerkat  | 2010/10/10 |
| 10.04 LTS            | Lucid Lynx        | 2010/4/29  |
| 9.1                  | Karmic Koala      | 2009/10/29 |
| 9.04                 | Jaunty Jackalope  | 2009/4/23  |
| 8.1                  | Intrepid Ibex     | 2008/10/30 |
| 8.04 LTS             | Hardy Heron       | 2008/4/24  |
| 7.1                  | Gutsy Gibbon      | 2007/10/18 |
| 7.04                 | Feisty Fawn       | 2007/4/19  |
| 6.1                  | Edgy Eft          | 2006/10/26 |
| 6.06 LTS             | Dapper Drake      | 2006/6/1   |
| 5.1                  | Breezy Badger     | 2005/10/13 |
| 5.04                 | Hoary Hedgehog    | 2005/4/8   |
| 4.10(First)          | Warty Warthog     | 2004/10/20 |

LTS means long term support, equal to five years. Take 18.04 LTS as an example, it starts from 2018/4/26, ends in 2023/4/26.
[18.04 LTS](https://releases.ubuntu.com/18.04) bases on Linux kernel 4.15, uses OpenJDK 10, Python 3.6, GNOME 3.28, supports LXD 3.0, QEMU 2.11.1, libvirt 4.0, DPDK 17.11.x, Open vSwitch 2.9, Nginx 1.14.0, PHP 7.2.x, Apache 2.4.29.


- [Linux](https://www.kernel.org/)

| version |                             number                             |           timeline            |
| ------- | -------------------------------------------------------------- | ----------------------------- |
| 1.0     | 0.01„ÄÅ0.02„ÄÅ0.03„ÄÅ0.10„ÄÅ0.11„ÄÅ0.12„ÄÅ0.95„ÄÅ0.96„ÄÅ0.97„ÄÅ0.98„ÄÅ0.99 | A.B                           |
| 1.0~2.6 | 1.0(1994)                                                      | A.B.C                         |
|         | 2.0(1996)                                                      | odd B unstable, even B stable |
|         | 2.6.0(2003.12)                                                 | A.B.C-D                       |
|         | 2.6.39(2011.5)                                                 |                               |
| 3.0     | 2.6.40(2011.7)                                                 |                               |
|         | 3.19(2015.2)                                                   |                               |
| 4.x.y   | 4.0(2015.4)                                                    |                               |
|         | 4.2(2015.8)                                                    |                               |
| 5.x.y   | 5.0(2019.3)                                                    |                               |
| 6.x.y   | 5.0(2022.8)                                                    |                               |

Mainline, Stable, Long Term Support, Linux-next, Snapshot

mainline:	6.2-rc4	2023-01-15	[tarball]		[patch]	[inc. patch]	[view diff]	[browse]	
stable:	6.1.7	2023-01-18	[tarball]	[pgp]	[patch]	[inc. patch]	[view diff]	[browse]	[changelog]
stable:	6.0.19 [EOL]	2023-01-12	[tarball]	[pgp]	[patch]	[inc. patch]	[view diff]	[browse]	[changelog]
longterm:	5.15.89	2023-01-18	[tarball]	[pgp]	[patch]	[inc. patch]	[view diff]	[browse]	[changelog]
longterm:	5.10.164	2023-01-18	[tarball]	[pgp]	[patch]	[inc. patch]	[view diff]	[browse]	[changelog]
longterm:	5.4.229	2023-01-18	[tarball]	[pgp]	[patch]	[inc. patch]	[view diff]	[browse]	[changelog]
longterm:	4.19.270	2023-01-18	[tarball]	[pgp]	[patch]	[inc. patch]	[view diff]	[browse]	[changelog]
longterm:	4.14.303	2023-01-18	[tarball]	[pgp]	[patch]	[inc. patch]	[view diff]	[browse]	[changelog]
longterm:	4.9.337 [EOL]	2023-01-07	[tarball]	[pgp]	[patch]	[inc. patch]	[view diff]	[browse]	[changelog]
linux-next:	next-20230119	2023-01-19						[browse]	

Linux_6.0 Released Sun, 15 Aug 2022

Linux_5.0 Released Sun, 3 Mar 2019 (70 days)

Linux_4.20 Released 23 December, 2018 (62 days)

Linux_4.19 Released 22 October, 2018 (71 days)

Linux_4.18 Released 12 August, 2018 (70 days)

Linux_4.17 Released 3 Jun, 2018 (63 days)

Linux_4.16 Released 1 Apr, 2018 (73 days)

Linux_4.15 Released 18 January, 2018 (77 days)

Linux_4.14 Released 12 November, 2017 (70 days)

Linux_4.13 Released 3 September, 2017 (63 days)

Linux_4.12 Released 2 July, 2017 (63 days)

Linux_4.11 Released 30 April, 2017 (70 days)

Linux_4.10 Released 19 February, 2017 (70 days)

Linux_4.9 Released 11 December, 2016 (70 days)

Linux_4.8 Released 2 October, 2016 (70 days)

Linux_4.7 Released 24 July, 2016 (70 days)

Linux_4.6 Released 15 May, 2016 (63 days)

Linux_4.5 Released 13 March, 2016 (63 days)

Linux_4.4 Released 10 January, 2016 (70 days)

Linux_4.3 Released 1 November, 2015 (63 days)

Linux_4.2 Released 30 August, 2015 (70 days)

Linux_4.1 Released 21 June, 2015 (70 days)

Linux_4.0 Released 12 April, 2015 (63 days)

Linux_3.19 Released 8 February, 2015 (63 days)

Linux_3.18 Released 7 December, 2014 (63 days)

Linux_3.17 Released 5 October, 2014 (63 days)

Linux_3.16 Released 3 August, 2014 (56 days)

Linux_3.15 Released 8 June, 2014 (70 days)

Linux_3.14 Released 30 March, 2014 (70 days)

Linux_3.13 Released 19 January, 2014 (78 days)

Linux_3.12 Released 2 November, 2013 (61 days)

Linux_3.11 Released 2 September, 2013 (64 days)

Linux_3.10 Released 30 June, 2013 (63 days)

Linux_3.9 Released 28 April, 2013 (69 days)

Linux_3.8 Released 18 February, 2013 70 ( days)

Linux_3.7 Released 10 December 2012 (71 days)

Linux_3.6 Released 30 September, 2012 (71 days)

Linux_3.5 Released 21 July, 2012 (62 days)

Linux_3.4 Released 20 May, 2012 (63 days)

Linux_3.3 Released 18 March, 2012 (74 days)

Linux_3.2 Released 4 January, 2012 (72 days)

Linux_3.1 Released 24 October, 2011 (95 days)

Linux_3.0 Released 21 July, 2011 (64 days)

Linux 2.6.39 Released 18 May, 2011 (65 days)

Linux 2.6.38 Released 14 March, 2011 (69 days)

Linux 2.6.37 Released 4 January, 2011 (76 days)

Linux 2.6.36 Released 20 October, 2010 (80 days)

Linux 2.6.35 Released 1 August, 2010 (76 days)

Linux 2.6.34 Released 16 May, 2010 (81 days)

Linux 2.6.33 Released 24 February, 2010 (83 days)

Linux 2.6.32 Released 3 December, 2009 (84 days)

Linux 2.6.31 Released 9 September, 2009 (92 days)

Linux 2.6.30 Released 9 June, 2009 (77 days)

Linux 2.6.29 Released 24 March, 2009 (89 days)

Linux 2.6.28 Released 25 December, 2008 (77 days)

Linux 2.6.27 Released 9 October, 2008 (88 days)

Linux 2.6.26 Released 13 July, 2008 (87 days)

Linux 2.6.25 Released 17 April, 2008 (84 days)

Linux 2.6.24 Released 24 January, 2008 (107 days)

Linux 2.6.23 Released 9 October, 2007 (93 days)

Linux 2.6.22 Released 8 July, 2007 (73 days)

Linux 2.6.21 Released 26 April, 2007 (80 days)

Linux 2.6.20 Released 5 February, 2007 (68 days)

Linux 2.6.19 Released 29 November, 2006 (70 days)

Linux 2.6.18 Released 20 September, 2006 (95 days)

Linux 2.6.17 Released 17 June, 2006 (88 days)

Linux 2.6.16 Released 20 March, 2006 (76 days)

Linux 2.6.15 Released 3 January, 2006 (68 days)

Linux 2.6.14 Released 27 October, 2005 (59 days)

Linux 2.6.13 Released 29 August, 2005 (73 days)

Linux 2.6.12 Released 17 June, 2005 (107 days)

Linux 2.6.11 Released 2 March, 2005 (68 days)

Linux 2.6.10 Released 24 December, 2004 (66 days)

Linux 2.6.9 Released 19 October, 2004 (66 days)

Linux 2.6.8 Released 14 August, 2004 (59 days)

Linux 2.6.7 Released 16 June, 2004 (37 days)

Linux 2.6.6 Released 10 May, 2004 (36 days)

Linux 2.6.5 Released 4 April, 2004 (24 days)

Linux 2.6.4 Released 11 March, 2004 (22 days)

Linux 2.6.3 Released 18 February, 2004 (14 days)

Linux 2.6.2 Released 4 February, 2004 (26 days)

Linux 2.6.1 Released 9 January, 2004 (22 days)

Linux 2.6.0 Released 18 December, 2003

- Ubuntu vs Linux

 4.10 Warty Warthog 2.6.8 
 
5.04 Hoary Hedgehog 2.6.10 

5.10 Breezy Badger 2.6.12 

6.06 Dapper Drake 2.6.15 

6.10 Edgy Eft 2.6.17 

7.04 Feisty Fawn 2.6.20 

7.10 Gutsy Gibbon 2.6.22 

8.04 Hardy Heron 2.6.24 

8.10 Intrepid Ibex 2.6.27 

9.04 Jaunty Jackalope 2.6.28 

9.10 Karmic Koala 2.6.31 

10.04 Lucid Lynx 2.6.32 

10.10 Maverick Meerkat 2.6.35 

11.04 Natty Narwhal 2.6.38 

11.10 Oneiric Ocelot 3.0 

12.04 Precise Pangolin 3.2 or newer 

12.10 Quantal Quetzal 3.5 

13.04 Raring Ringtail 3.8 

13.10 Saucy Salamander 3.11 

14.04 Trusty Tahr 3.13 or newer 

14.10 Utopic Unicorn 3.16 

15.04 Vivid Vervet 3.19 

15.10 Wily Werewolf 4.2 

16.04 Xenial Xerus 4.4 or newer 

16.10 Yakkety Yak 4.8 

17.04 Zesty Zapus 4.10 

17.10 Artful Aardvark 4.13 

18.04 Bionic Beaver 4.15 or newer 

18.10 Cosmic Cuttlefish 4.17

20.04 Focal Fossa 5.4.0

### Build

Build linux on Ubuntu is simple, follow below steps

- kernel

```
# origin https://cdn.kernel.org/pub/linux/kernel/v4.x/linux-4.15.6.tar.xz
wget http://ftp.sjtu.edu.cn/sites/ftp.kernel.org/pub/linux/kernel/v4.x/linux-4.15.6.tar.xz
tar -Jvxf linux-4.15.6.tar.xz # decomp

apt-get install git build-essential libelf-dev xz-utils libssl-dev bc libncurses5-dev libncursesw5-dev

# config file
wget https://gitee.com/songtianlun/USTC_OS/raw/master/term2021/lab1/.config 
# export ARCH=x86
make -j20

# wait until
# Kernel: arch/x86/boot/bzImage is ready  (#1)
# then all set
```

the process is as below,

~~~
                                                                                Bootable
                                                              (vmlinuz)         Kernelxxx
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ             ‚îÇ      ‚îÇ             ‚îÇ     ‚îÇ             ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ             ‚îÇ
‚îÇ             ‚îÇ      ‚îÇ             ‚îÇ     ‚îÇ             ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ             ‚îÇ
‚îÇ             ‚îÇ      ‚îÇ             ‚îÇ     ‚îÇ             ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ             ‚îÇ
‚îÇ             ‚îÇ      ‚îÇ             ‚îÇ     ‚îÇ             ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ             ‚îÇ
‚îÇ             ‚îÇ      ‚îÇ             ‚îÇ     ‚îÇ             ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ             ‚îÇ
‚îÇ             ‚îÇOBJ   ‚îÇ             ‚îÇ     ‚îÇ             ‚îÇ    ‚îÇ            ‚îÇOBJ ‚îÇ             ‚îÇ
‚îÇ  vmlinux    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  Image      ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ     gz      ‚îú‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ    *.o     ‚îú‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ    zImage   ‚îÇ
‚îÇ             ‚îÇ copy ‚îÇ             ‚îÇgzip ‚îÇ             ‚îÇasm ‚îÇ            ‚îÇcopy‚îÇ             ‚îÇ
‚îÇ     ELF     ‚îÇ      ‚îÇ  BIN        ‚îÇ     ‚îÇ             ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ             ‚îÇ
‚îÇ             ‚îÇ      ‚îÇ             ‚îÇ     ‚îÇ             ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ             ‚îÇ
‚îÇ             ‚îÇ      ‚îÇ             ‚îÇ     ‚îÇ             ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ             ‚îÇ
‚îÇ             ‚îÇ      ‚îÇ             ‚îÇ     ‚îÇ             ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ             ‚îÇ
‚îÇ             ‚îÇ      ‚îÇ             ‚îÇ     ‚îÇ             ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ             ‚îÇ
‚îÇ             ‚îÇ      ‚îÇ             ‚îÇ     ‚îÇ             ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ             ‚îÇ
‚îÇ             ‚îÇ      ‚îÇ             ‚îÇ     ‚îÇ             ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ             ‚îÇ
‚îÇ             ‚îÇ      ‚îÇ             ‚îÇ     ‚îÇ             ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     Kernel            Stripped             Compressed
     Porper            Image                Kernel

~~~

bzImage is the Ubuntu kernel file

|  file   |              |            |                                |
| ------- | ------------ | ---------- | ------------------------------ |
| vmlinux | uncompressed | unbootable |                                |
| vmlinuz | compressed   | bootable   |                                |
| zImage  |              |            | copied vmlinuz                 |
| bzImage |              |            | big zImage(for memory > 640KB) |

- rootfs

Build oneline rootfs follow below steps 

```
mkdir rootfs
cd rootfs


# cat init.c

#include <stdio.h>
void main()
{
    printf("Welcome to qemu\n");
    printf("and first program:\n");
    printf("=> init\n");
    fflush(stdout);
    while(1);
}

gcc -static -o init init.c

echo init | cpio -o --format=newc > initramfs

```

### Boot 

- <a name="hw"></a>bare metal hello with [qemu](QEMU_KVM.md) 


```
#
# one should make sure x11 is enable if remote connect 
qemu-system-x86_64 -s \
    -kernel ./linux-4.15.6/arch/x86/boot/bzImage  \
    -initrd ./linux-4.15.6/rootfs/initramfs \
    -append "init=/init" # remove root=/dev/ram, otherwise we have VFS problem
    
# -s, so we can use gdb on tcp:1234
gdb linux-4.15.6/vmlinux

target remote localhost:1234
```

- <a name="hw"></a>mount hello into busybox img with [qemu](QEMU_KVM.md) 

```
tar -jxf busybox-1.32.1.tar.bz2 
cd busybox-1.32.1/
make menuconfig # remember to make static lib
make -j20
make install # this will give _install
qemu-img create -f raw disk.img 1G
sudo mkfs.ext4 disk.img
mkdir rootfs
sudo mount disk.img rootfs
sudo rsync -ar busybox-1.32.1/_inistall/* rootfs/
cd rootfs
sudo chown root:root * -R
sudo mkdir -p proc sys dev etc/init.d
sudo mknod -m 622 dev/console c 5 1
sudo mknod -m 666 dev/null c 1 3
sudo mknod -m 666 dev/zero c 1 5
sudo mknod -m 666 dev/ptmx c 5 2
sudo mknod -m 666 dev/tty c 5 0
sudo mknod -m 444 dev/random c 1 8
sudo mknod -m 444 dev/urandom c 1 9
sudo chown root:tty dev/{console,ptmx,tty}
sudo sh -c 'echo "#!/bin/sh\nmount -t proc none /proc\nmount -t sysfs no'
sudo chmod a+x etc/init.d/rcS
sudo umount rootfs

# bzImage is compressed linux kernel, vmlinux is uncompressed
qemu-system-x86_64 -kernel bzImage -nographic -append "console=ttyS0 root=/dev/sda rw" -drive file=disk.img,format=raw,id=hd0

# one can debug kernel by gdb, remember to enable config though
Kernel hacking->Compile-time checks and compiler options->Compile the kernel with debug info&&Provide GDB scripts for kernel debugging
# one can use vmlinux, if PVH Note is enabled
Processor type and features->Linux guest support->Support for running PVH guests
# F6 save, F9 exit

# add hello
#include <stdio.h>

int main(void)
{
        printf("hello.\n");
        return 0;
}

gcc -static a.c -o hello

# remount
sudo mount disk.img rootfs
sudo mv hello rootfs/usr/sbin/
sudo umount rootfs
# and restart qemu
qemu-system-x86_64 -kernel bzImage -nographic -append "console=ttyS0 root=/dev/sda rw" -drive file=disk.img,format=raw,id=hd0
# below is qemu console
Please press Enter to activate this console. 
/ # hello
hello.
[    8.918524] hello (1038) used greatest stack depth: 13856 bytes left
# ctrl a+x to quit

# -S -s
cd linux
gdb vmlinux
target remote :1234
b start_kernel
layout src
c
```

- <a name="applet"></a>add applet into busybox is so hardüíÄ


- rdn2 with [fvp](https://gitlab.arm.com/arm-reference-solutions/arm-reference-solutions-docs/-/tree/master/docs/infra/rdn2cfg1)

the fvp opens 11 telnet port, s0 = armtf = 0+6 = 12+6
~~~
tcp        0      0 0.0.0.0:5012            0.0.0.0:*               LISTEN      512127/FVP_RD_N2_Cf 
tcp        0      0 0.0.0.0:5013            0.0.0.0:*               LISTEN      512127/FVP_RD_N2_Cf 
tcp        0      0 0.0.0.0:5014            0.0.0.0:*               LISTEN      512127/FVP_RD_N2_Cf 
tcp        0      0 0.0.0.0:5015            0.0.0.0:*               LISTEN      512127/FVP_RD_N2_Cf 
tcp        0      0 0.0.0.0:5016            0.0.0.0:*               LISTEN      512127/FVP_RD_N2_Cf 
tcp        0      0 localhost:afs3-callback 0.0.0.0:*               LISTEN      512127/FVP_RD_N2_Cf 
tcp        0      0 0.0.0.0:5017            0.0.0.0:*               LISTEN      512127/FVP_RD_N2_Cf 
tcp        0      0 0.0.0.0:5018            0.0.0.0:*               LISTEN      512127/FVP_RD_N2_Cf 
tcp        0      0 0.0.0.0:5019            0.0.0.0:*               LISTEN      512127/FVP_RD_N2_Cf 
tcp        0      0 0.0.0.0:5020            0.0.0.0:*               LISTEN      512127/FVP_RD_N2_Cf 
tcp        0      0 0.0.0.0:5021            0.0.0.0:*               LISTEN      512127/FVP_RD_N2_Cf 
tcp        0      0 0.0.0.0:5022            0.0.0.0:*               LISTEN      512127/FVP_RD_N2_Cf

terminal_uart_scp: Listening for serial connection on port 5000

terminal_uart_mcp: Listening for serial connection on port 5001

terminal_ns_uart_ap: Listening for serial connection on port 5002

terminal_s_uart_ap: Listening for serial connection on port 5003

iomacro_terminal_0: Listening for serial connection on port 5004

iomacro_terminal_1: Listening for serial connection on port 5005

terminal_s0: Listening for serial connection on port 5006

terminal_s1: Listening for serial connection on port 5007

terminal_mcp: Listening for serial connection on port 5008

terminal_0: Listening for serial connection on port 5009

terminal_1: Listening for serial connection on port 5010
~~~

- connect via nc
```
nc -nvz 127.0.0.1 5018

nc 127.0.0.1 5018
```

- rdn2 start parameters

|short|long|function|
|---|---|---|
|-S|--cadi-server|start CADI server allowing debuggers to connect to targets in the simulation|
|-R|--run|run the simulation immediately at start of simulation when a debug server is started. Use in combination with --cadi-server or --iris-server|
|-C|--parameter SPEC|set parameter, format: -C INST.PARAM=VALUE|
|-s|--save DIR|Save checkpoint to DIR on simulation exit|
|-r|--restore DIR|Restore checkpoint from DIR on simulation start|
||--log FILE|log|
||--stat|print some run statistics on simulation exit|
|-T|--timelimit N|number of wall clock seconds for the simulator to run, excluding startup and shutdown.|
||--cpulimit N||
||--cyclelimit N||
||--simlimit N||
|-Q|--quantum N|Number of ticks per quantum|
||--start ADDRESS|set initial PC to application start address, format: --start [INST=]ADDRESS|
-o|--output FILE|redirect parameters, memory and instance lists to output file FILE|

```
/home/zzx/fvp/rdn2-cfg1/model-scripts/rdinfra/../../../support/Model/FVP_RD_N2_Cfg1 --data css.scp.armcortexm7ct=/home/zzx/fvp/rdn2-cfg1/output/rdn2cfg1/rdn2cfg1/scp_ramfw.bin@0x0BD80000 --data css.mcp.armcortexm7ct=/home/zzx/fvp/rdn2-cfg1/output/rdn2cfg1/rdn2cfg1/mcp_ramfw.bin@0x0BF80000 -C css.mcp.ROMloader.fname=/home/zzx/fvp/rdn2-cfg1/output/rdn2cfg1/rdn2cfg1/mcp_romfw.bin -C css.scp.ROMloader.fname=/home/zzx/fvp/rdn2-cfg1/output/rdn2cfg1/rdn2cfg1/scp_romfw.bin -C css.trustedBootROMloader.fname=/home/zzx/fvp/rdn2-cfg1/output/rdn2cfg1/rdn2cfg1/tf-bl1.bin -C board.flashloader0.fname=/home/zzx/fvp/rdn2-cfg1/output/rdn2cfg1/rdn2cfg1/fip-uefi.bin -C board.flashloader1.fname=/home/zzx/fvp/rdn2-cfg1/model-scripts/rdinfra/platforms/rdn2cfg1/nor1_flash.img -C board.flashloader1.fnameWrite=/home/zzx/fvp/rdn2-cfg1/model-scripts/rdinfra/platforms/rdn2cfg1/nor1_flash.img -C board.flashloader2.fname=/home/zzx/fvp/rdn2-cfg1/model-scripts/rdinfra/platforms/rdn2cfg1/nor2_flash.img -C board.flashloader2.fnameWrite=/home/zzx/fvp/rdn2-cfg1/model-scripts/rdinfra/platforms/rdn2cfg1/nor2_flash.img  -C css.scp.pl011_uart_scp.out_file=rdn2cfg1/refinfra-948586-uart-0-scp_2022-02-08_06.39.15 -C css.scp.pl011_uart_scp.unbuffered_output=1 -C css.scp.pl011_uart_scp.uart_enable=true -C css.pl011_s_uart_ap.out_file=rdn2cfg1/refinfra-948586-uart-0-console_2022-02-08_06.39.15 -C soc.pl011_uart_mcp.out_file=rdn2cfg1/refinfra-948586-uart-0-mcp_2022-02-08_06.39.15 -C soc.pl011_uart_mcp.unbuffered_output=1 -C soc.pl011_uart0.out_file=rdn2cfg1/refinfra-948586-uart-0-armtf_2022-02-08_06.39.15 -C soc.pl011_uart0.unbuffered_output=1 -C soc.pl011_uart0.flow_ctrl_mask_en=1 -C soc.pl011_uart0.enable_dc4=0 -C soc.pl011_uart1.out_file=rdn2cfg1/refinfra-948586-uart-1-mm_2022-02-08_06.39.15 -C soc.pl011_uart1.unbuffered_output=1 -C soc.pl011_uart1.flow_ctrl_mask_en=1 -C soc.pl011_uart1.enable_dc4=0 -C css.pl011_s_uart_ap.unbuffered_output=1 -C css.gic_distributor.ITS-device-bits=20 -C pcie_group_0.pciex16.hierarchy_file_name=\<default\> -C pcie_group_0.pciex16.pcie_rc.ahci0.endpoint.ats_supported=true -C soc.nonPCIe_devices_iomacro.pl330_dma_0.p_controller_nsecure=1 -C soc.nonPCIe_devices_iomacro.pl330_dma_0.p_irq_nsecure=1 -C soc.nonPCIe_devices_iomacro.pl330_dma_0.p_periph_nsecure=1 -C soc.nonPCIe_devices_iomacro.pl330_dma_1.p_controller_nsecure=1 -C soc.nonPCIe_devices_iomacro.pl330_dma_1.p_irq_nsecure=1 -C soc.nonPCIe_devices_iomacro.pl330_dma_1.p_periph_nsecure=1 -C board.virtioblockdevice.image_path=/home/zzx/fvp/rdn2-cfg1/output/rdn2cfg1/grub-busybox.img -C board.flash0.diagnostics=1 -s /home/zzx/fvp/rdn2-cfg1/model-scripts/rdinfra/platforms/rdn2cfg1/rdn2cfg1/  --stat --log rdn2cfg1/log -C board.virtio_net.hostbridge.interfaceName=tap0 -C board.virtio_net.enabled=1 -C board.virtio_net.transport=legacy
```

- figlet design init.sh

```
echo '
 _          _ _
| |__   ___| | | ___
| \  \ / _ \ | |/ _ \
| | | |  __/ | | (_) |
|_| |_|\___|_|_|\___/
                           
  '
```

multiple line must use single quote
-E is the default, which wont convert backslash
-e is the opposite
figlet is a tool for badge
-n is keeping one line for echo
s/\\/\\\\/g
echo ''"'"''

- Autorun [SPEC2017](SPEC2017.md) inside OS via fork 

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <time.h>
#define KNRM  "\x1B[0m"
#define KRED  "\x1B[31m"
#define KGRN  "\x1B[32m"
#define KYEL  "\x1B[33m"
#define KBLU  "\x1B[34m"
#define KMAG  "\x1B[35m"
#define KCYN  "\x1B[36m"
#define KWHT  "\x1B[37m"

int main(void)
{
        FILE *fp;
        char buffer[80];
        printf("Linx : ");
        fp = popen("uname -r", "r");
        fgets(buffer, sizeof(buffer), fp);
        printf("%s", buffer);
        pclose(fp);
        printf("Bbox : ");
        fp = popen("busybox --help | head -n 1", "r");
        fgets(buffer, sizeof(buffer), fp);
        printf("%s", buffer);
        pclose(fp);
        printf("Date : %s\n", __DATE__);
        printf("Time : %s\n", __TIME__);
        //printf("File : %s\n", __FILE__);
        //printf("Line : %d\n", __LINE__);

        unsigned theTick = 0U;
        struct timespec ts, te;
        long start, finish, duration;
        clock_gettime( CLOCK_REALTIME, &ts );
        start = ts.tv_sec;
        printf("=====start @%ld=====\n", start);


        int cpid = fork();
        if(cpid == 0) {
                puts("\e[5m\n"
" _______     ______  \n"
"|  ___\\ \\   / /  _ \\ \n"
"| |_   \\ \\ / /| |_) |\n"
"|  _|   \\ V / |  __/ \n"
"|_|      \\_/  |_|    \e[0m\n");
                printf("Spec : %d\n", 508);
                start = clock();
                //some algorithm
                /*
                long i = 100000000L;
                while(i--);
                */

                int status = system("508/namd_r --input 508/apoa1.input --output 508/apoa1.ref.output --iterations 1");
//              status = execl("508/namd_r", "508/namd_r", "--input", "508/apoa1.input", "--output", "508/apoa1.ref.output", "--iterations", "1", (char*)0);
                //printf("\e[1;34m%f\e[0m seconds\n", duration);
                //printf("%s%f%s\n", KRED, duration, KNRM);
                exit(0);
        }
        printf("\033[4m Running Spec On \033[0m\n");
        wait(cpid);

        clock_gettime( CLOCK_REALTIME, &te );
        finish = te.tv_sec;
        printf("=====finish @%ld=====\n", finish);
        duration = (finish - start);
        printf("Secs : %ld\n", duration);


        theTick  = (te.tv_nsec - ts.tv_nsec) / 1000000;
        theTick += (te.tv_sec - ts.tv_sec) * 1000;
        printf("Tcks : %u\n", theTick);
        //printf("\e[1;34m%6u\e[0m     ticks\n", theTick);
//how to mimic key stroke? so we can exit qemu...
        return 0;
        
}
```

### Poweron

| Sequence |                                                                        |         |
| ------- | ---------------------------------------------------------------------- | ------- |
| ALARM   |                                                                        | di      |
| POST    | CPUÔºçROMÔºçBIOSÔºçSystem ClockÔºçDMAÔºçRAMÔºçIRQÔºçGC(graphic card)ÔºçI/OÔºçCMOS |         |
| BIOS    | NorÔºçFlash                                                              |         |
| MBR     | copy 512byte boot loader from SSD ROM to DDR RAM                       | stage1  |
| GRUB    | load vmlinuz initramfs                                                 | stage2  |
| Kernel  | start_kernel()                                                         |         |
| Rootfs  | /sbin/init, set runlevel from /etc/inittab                             |         |
|         | /etc/rcS.d/, then /etc/rcN.d/, N equal to runlevel                     |         |
|         | /etc/rcS.d/S35mountall.sh                                              | mount   |
|         | /etc/rcS.d/S40networking                                               | network |
|         | /etc/rc2.d/S13gdm                                                      | login   |
|         | /etc/rc2.d/S20makedev                                                  | dev     |
|         | /etc/rc2.d/S23xinetd                                                   | xinetd  |

initramfs equal to using cpio put initrd into kernel

initrd equal to initial ramdisk







<a href="#top">Back to top</a>
